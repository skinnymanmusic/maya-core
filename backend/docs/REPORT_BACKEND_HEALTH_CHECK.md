# Maya Backend - Static Health Check Report

Generated by automated health check

## Summary

- **Total Routers:** 11
- **Total Endpoints:** 0
- **Service Import Issues:** 0

## Main Application (app/main.py)

### Router Registration

| Router | Imported | Included | Status |
|--------|----------|----------|--------|
| gmail | ✅ | ✅ | ✅ OK |
| calendar | ✅ | ✅ | ✅ OK |
| health | ✅ | ✅ | ✅ OK |
| auth | ✅ | ✅ | ✅ OK |
| clients | ✅ | ✅ | ✅ OK |
| agents | ✅ | ✅ | ✅ OK |
| metrics | ✅ | ✅ | ✅ OK |
| unsafe_threads | ✅ | ✅ | ✅ OK |
| stripe | ✅ | ✅ | ✅ OK |
| sms | ✅ | ✅ | ✅ OK |
| bookings | ✅ | ✅ | ✅ OK |

### Middleware Stack

1. ✅ CORSMiddleware
2. ✅ SecurityMiddleware
3. ✅ TenantContextMiddleware

### Lifespan Management

- ✅ Database pool initialization on startup
- ✅ Database pool cleanup on shutdown

## Router Details

### agents

- **File:** `app\routers\agents.py`
- **Prefix:** `/api/agents`
- **Tags:** agents
- **Endpoints:** 0

### auth

- **File:** `app\routers\auth.py`
- **Prefix:** `/api/auth`
- **Tags:** auth
- **Endpoints:** 0

**Service Imports:**

- `from app.services.auth_service import TokenPair`
- `from app.services.auth_service import authenticate_user`
- `from app.services.auth_service import create_token_pair`
- `from app.services.auth_service import get_current_user`
- `from app.services.auth_service import User`
- `from app.services.sso_service import get_sso_service`
- `from app.services.tenant_resolution_service import get_tenant_resolution_service`

### bookings

- **File:** `app\routers\bookings.py`
- **Prefix:** `/api/bookings`
- **Tags:** bookings
- **Endpoints:** 0

**Service Imports:**

- `from app.services.audit_service import get_audit_service`

### calendar

- **File:** `app\routers\calendar.py`
- **Prefix:** `/api/calendar`
- **Tags:** calendar
- **Endpoints:** 0

**Service Imports:**

- `from app.services.calendar_service_v3 import CalendarServiceV3`

### clients

- **File:** `app\routers\clients.py`
- **Prefix:** `/api/clients`
- **Tags:** clients
- **Endpoints:** 0

**Service Imports:**

- `from app.services.supabase_service import create_client`
- `from app.services.supabase_service import get_client_by_id`
- `from app.services.supabase_service import list_clients`
- `from app.services.supabase_service import search_client_by_email`
- `from app.services.supabase_service import update_client`
- `from app.services.supabase_service import delete_client`

### gmail

- **File:** `app\routers\gmail.py`
- **Prefix:** `/api/gmail`
- **Tags:** gmail
- **Endpoints:** 0

**Service Imports:**

- `from app.services.gmail_webhook import verify_jwt_token`
- `from app.services.gmail_webhook import process_webhook_message`
- `from app.services.gmail_service import setup_watch`
- `from app.services.email_processor_v3 import EmailProcessorV3`

### health

- **File:** `app\routers\health.py`
- **Prefix:** `/api/health`
- **Tags:** health
- **Endpoints:** 0

### metrics

- **File:** `app\routers\metrics.py`
- **Prefix:** `/api/metrics`
- **Tags:** metrics
- **Endpoints:** 0

**Service Imports:**

- `from app.services.auth_service import get_current_admin_user`
- `from app.services.auth_service import User`

### sms

- **File:** `app\routers\sms.py`
- **Prefix:** `/api/sms`
- **Tags:** sms
- **Endpoints:** 0

**Service Imports:**

- `from app.services.sms_service import get_sms_service`
- `from app.services.conversation_service import ConversationService`
- `from app.services.booking_service import BookingService`
- `from app.services.audit_service import get_audit_service`

### stripe

- **File:** `app\routers\stripe.py`
- **Prefix:** `/api/stripe`
- **Tags:** stripe
- **Endpoints:** 0

**Service Imports:**

- `from app.services.stripe_service import get_stripe_service`
- `from app.services.audit_service import get_audit_service`

### unsafe_threads

- **File:** `app\routers\unsafe_threads.py`
- **Prefix:** `/api/unsafe-threads`
- **Tags:** unsafe-threads
- **Endpoints:** 0

**Service Imports:**

- `from app.services.auth_service import get_current_admin_user`
- `from app.services.auth_service import User`

## ✅ No Issues Found

All routers and services are properly wired.

## Health Status

### ✅ Healthy

- All routers registered correctly
- All service imports have corresponding modules
- Application structure is sound

## Recommendations

### Before Deploy

1. Run smoke test: `python -m uvicorn app.main:app --reload`
2. Verify all endpoints respond: `curl http://localhost:8000/api/health`
3. Check database connectivity
4. Verify environment variables are set

### Testing Priority

**High Priority:**
- `/api/health` - Health check endpoint
- `/api/auth/login` - Authentication flow
- `/api/gmail/*` - Gmail integration

**Medium Priority:**
- `/api/calendar/*` - Calendar management
- `/api/clients/*` - Client management
- `/api/sms/*` - SMS integration

**Low Priority (can be stubbed):**
- `/api/agents/*` - Agent workflows
- `/api/metrics/*` - Analytics

