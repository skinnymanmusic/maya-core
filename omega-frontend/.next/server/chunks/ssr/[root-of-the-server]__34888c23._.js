module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},83420,(a,b,c)=>{"use strict";b.exports=a.r(18622)},2511,(a,b,c)=>{"use strict";b.exports=a.r(83420).vendored["react-ssr"].ReactJsxRuntime},95912,(a,b,c)=>{"use strict";b.exports=a.r(83420).vendored["react-ssr"].React},75792,(a,b,c)=>{},88969,69556,a=>{"use strict";let b;var c=a.i(2511),d=a.i(75792);function e({children:a}){return(0,c.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,c.jsx)(d.Sidebar,{}),(0,c.jsx)("main",{className:"flex-1 overflow-y-auto p-8",children:a})]})}a.s(["AppLayout",()=>e],88969);var f=a.i(95912);let g=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f},h=a=>{let b=a?g(a):g,c=a=>(function(a,b=a=>a){let c=f.default.useSyncExternalStore(a.subscribe,f.default.useCallback(()=>b(a.getState()),[a,b]),f.default.useCallback(()=>b(a.getInitialState()),[a,b]));return f.default.useDebugValue(c),c})(b,a);return Object.assign(c,b),c},i={backendUrl:process.env.NEXT_PUBLIC_OMEGA_BACKEND??"http://localhost:8000",endpoints:{health:"/api/health",agents:"/api/tenant-agents",clients:"/api/clients",messages:"/api/messages",events:"/api/calendar/events",automations:"/api/automations",authMe:"/api/auth/me",authRefresh:"/api/auth/refresh"}},j=(b=a=>({healthy:!0,safeMode:!1,lastError:null,setHealthy:b=>a({healthy:b}),setSafeMode:b=>a({safeMode:b}),setLastError:b=>a({lastError:b})}))?h(b):h;function k(a){if(!a)return"Unknown error";if("string"==typeof a)return a;if(a.detail)return a.detail;if(a.message)return a.message;try{return JSON.stringify(a)}catch{return"Unparsable error response"}}function l(a,b,c="default"){console.log(`${"destructive"===c?"âŒ":"warning"===c?"âš ï¸":"â„¹ï¸"} ${a}: ${b}`)}async function m(a,b,c){let d,e=j.getState(),f=`${i.backendUrl}${b}`,g={method:a,headers:{"Content-Type":"application/json"}};c&&(g.body=JSON.stringify(c));try{d=await fetch(f,g)}catch(b){e.setHealthy(!1);let a=k(b);throw l("Network Error",a,"destructive"),Error(a)}503===d.status&&(e.setSafeMode(!0),l("System in Safe Mode","OMEGA temporarily restricted to protect data integrity.","warning"));let h=null;try{let a=await d.text();a&&(h=JSON.parse(a))}catch(a){h=null}if(!d.ok){let a=k(h);throw e.setLastError(a),l("API Error",a,"destructive"),Error(a)}return e.setHealthy(!0),h}a.s(["bookingEndpoints",0,{list:"/api/bookings",create:"/api/bookings",get:a=>`/api/bookings/${a}`,update:a=>`/api/bookings/${a}`,delete:a=>`/api/bookings/${a}`},"omegaClient",0,{get:a=>m("GET",a),post:(a,b)=>m("POST",a,b),patch:(a,b)=>m("PATCH",a,b),delete:a=>m("DELETE",a)},"stripeEndpoints",0,{paymentStatus:a=>`/api/stripe/payment-status/${a}`}],69556)},52535,a=>{"use strict";var b=a.i(2511),c=a.i(95912),d=a.i(88969),e=a.i(69556);function f({bookingId:a}){let[d,f]=(0,c.useState)(null),[g,h]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{let b=async()=>{try{let b=await e.omegaClient.get(e.stripeEndpoints.paymentStatus(a));f(b)}catch(a){console.error("Failed to fetch payment status:",a)}finally{h(!1)}};b();let c=setInterval(b,5e3);return()=>clearInterval(c)},[a]),g)?(0,b.jsx)("div",{className:"p-4 border rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-gray-200 border-t-blue-600 rounded-full animate-spin"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading payment status..."})]})}):d?(0,b.jsxs)("div",{className:"p-3 sm:p-4 border rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"font-semibold text-sm sm:text-base",children:"Payment Status"}),(0,b.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:d.booking_id})]}),(0,b.jsx)("span",{className:`px-2 sm:px-3 py-1 sm:py-1.5 rounded text-xs sm:text-sm font-medium min-h-[32px] min-w-[80px] flex items-center justify-center ${{paid:"text-green-600",pending:"text-yellow-600",failed:"text-red-600",cancelled:"text-gray-600"}[d.payment_status]||"text-gray-600"}`,children:d.payment_status})]}),d.payment_amount&&(0,b.jsxs)("div",{className:"mt-3 sm:mt-4",children:[(0,b.jsxs)("p",{className:"text-xl sm:text-2xl font-bold",children:["$",d.payment_amount.toFixed(2)]}),d.payment_timestamp&&(0,b.jsxs)("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:["Paid on ",new Date(d.payment_timestamp).toLocaleDateString()]})]})]}):(0,b.jsx)("div",{className:"p-4 border rounded-lg bg-gray-50",children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Payment status unavailable"})})}function g(){return(0,b.jsx)("div",{className:"p-4 border rounded-lg animate-pulse",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,b.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),(0,b.jsx)("div",{className:"h-3 bg-gray-200 rounded w-2/3"}),(0,b.jsx)("div",{className:"h-20 bg-gray-200 rounded"})]})})}function h({title:a="Something went wrong",message:c,onRetry:d,className:e=""}){return(0,b.jsx)("div",{className:`p-4 border border-red-200 bg-red-50 rounded-lg ${e}`,children:(0,b.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-red-800",children:a}),(0,b.jsx)("p",{className:"mt-1 text-sm text-red-700",children:c}),d&&(0,b.jsx)("button",{onClick:d,className:"mt-3 text-sm font-medium text-red-600 hover:text-red-800 underline focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 rounded px-2 py-1 min-h-[48px] min-w-[48px]",children:"Try again"})]})]})})}function i({size:a="md"}){return(0,b.jsx)("div",{className:`${{sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[a]} border-4 border-gray-200 border-t-blue-600 rounded-full animate-spin`})}function j(){let[a,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(null),o=async()=>{l(!0),n(null);try{let a=await e.omegaClient.get(e.bookingEndpoints.list);j(a||[])}catch(a){console.error("Failed to fetch bookings:",a),n(a.message||"Failed to load bookings. Please check your connection and try again.")}finally{l(!1)}};return((0,c.useEffect)(()=>{o()},[]),k&&0===a.length)?(0,b.jsx)(d.AppLayout,{children:(0,b.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Bookings"}),(0,b.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground mt-1",children:"View and manage your event bookings"})]}),(0,b.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(a=>(0,b.jsx)(g,{},a))})]})}):m&&0===a.length?(0,b.jsx)(d.AppLayout,{children:(0,b.jsxs)("div",{className:"container mx-auto p-4 sm:p-6",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Bookings"}),(0,b.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground mt-1",children:"View and manage your event bookings"})]}),(0,b.jsx)(h,{title:"Unable to load bookings",message:m,onRetry:o})]})}):(0,b.jsx)(d.AppLayout,{children:(0,b.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 space-y-4 sm:space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Bookings"}),(0,b.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground mt-1",children:"View and manage your event bookings"})]}),m&&(0,b.jsx)(h,{message:m,onRetry:o}),k&&a.length>0&&(0,b.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,b.jsx)(i,{size:"sm"}),(0,b.jsx)("span",{className:"ml-2 text-sm text-muted-foreground",children:"Refreshing..."})]}),0!==a.length||k?(0,b.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:a.map(a=>(0,b.jsx)("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow touch-manipulation",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"font-semibold text-base sm:text-lg",children:a.service_description}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.client_email}),a.event_date&&(0,b.jsxs)("p",{className:"text-sm",children:["ðŸ“… ",new Date(a.event_date).toLocaleDateString()]}),a.event_location&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["ðŸ“ ",a.event_location]}),(0,b.jsx)("div",{className:"mt-3",children:(0,b.jsx)(f,{bookingId:a.booking_id})})]})},a.booking_id))}):(0,b.jsx)("div",{className:"text-center py-12",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"No bookings found"})})]})})}a.s(["default",()=>j],52535)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__34888c23._.js.map