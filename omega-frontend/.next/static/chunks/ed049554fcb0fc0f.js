(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18858,(e,t,s)=>{},70408,59517,e=>{"use strict";let t;var s=e.i(92175),a=e.i(18858);function n({children:e}){return(0,s.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,s.jsx)(a.Sidebar,{}),(0,s.jsx)("main",{className:"flex-1 overflow-y-auto p-8",children:e})]})}e.s(["AppLayout",()=>n],70408);var r=e.i(83086),i=e.i(31150);let l=e=>{let t,s=new Set,a=(e,a)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=a?a:"object"!=typeof n||null===n)?n:Object.assign({},t,n),s.forEach(s=>s(t,e))}},n=()=>t,r={setState:a,getState:n,getInitialState:()=>i,subscribe:e=>(s.add(e),()=>s.delete(e))},i=t=e(a,n,r);return r},o=e=>{let t=e?l(e):l,s=e=>(function(e,t=e=>e){let s=i.default.useSyncExternalStore(e.subscribe,i.default.useCallback(()=>t(e.getState()),[e,t]),i.default.useCallback(()=>t(e.getInitialState()),[e,t]));return i.default.useDebugValue(s),s})(t,e);return Object.assign(s,t),s},d={backendUrl:r.default.env.NEXT_PUBLIC_OMEGA_BACKEND??"http://localhost:8000",endpoints:{health:"/api/health",agents:"/api/tenant-agents",clients:"/api/clients",messages:"/api/messages",events:"/api/calendar/events",automations:"/api/automations",authMe:"/api/auth/me",authRefresh:"/api/auth/refresh"}},c=(t=e=>({healthy:!0,safeMode:!1,lastError:null,setHealthy:t=>e({healthy:t}),setSafeMode:t=>e({safeMode:t}),setLastError:t=>e({lastError:t})}))?o(t):o;function m(e){if(!e)return"Unknown error";if("string"==typeof e)return e;if(e.detail)return e.detail;if(e.message)return e.message;try{return JSON.stringify(e)}catch{return"Unparsable error response"}}function u(e,t,s="default"){console.log(`${"destructive"===s?"âŒ":"warning"===s?"âš ï¸":"â„¹ï¸"} ${e}: ${t}`)}async function x(e,t,s){let a,n=c.getState(),r=`${d.backendUrl}${t}`,i={"Content-Type":"application/json"};{let e=window.localStorage.getItem("omega_token");e&&(i.Authorization=`Bearer ${e}`)}let l={method:e,headers:i};s&&(l.body=JSON.stringify(s));try{a=await fetch(r,l)}catch(t){n.setHealthy(!1);let e=m(t);throw u("Network Error",e,"destructive"),Error(e)}503===a.status&&(n.setSafeMode(!0),u("System in Safe Mode","OMEGA temporarily restricted to protect data integrity.","warning"));let o=null;try{let e=await a.text();e&&(o=JSON.parse(e))}catch(e){o=null}if(!a.ok){let e=m(o);throw n.setLastError(e),u("API Error",e,"destructive"),Error(e)}return n.setHealthy(!0),o}e.s(["bookingEndpoints",0,{list:"/api/bookings",create:"/api/bookings",get:e=>`/api/bookings/${e}`,update:e=>`/api/bookings/${e}`,delete:e=>`/api/bookings/${e}`},"omegaClient",0,{get:e=>x("GET",e),post:(e,t)=>x("POST",e,t),patch:(e,t)=>x("PATCH",e,t),delete:e=>x("DELETE",e)},"stripeEndpoints",0,{paymentStatus:e=>`/api/stripe/payment-status/${e}`}],59517)},10821,e=>{"use strict";var t=e.i(92175),s=e.i(31150),a=e.i(70408),n=e.i(59517);function r({bookingId:e}){let[a,r]=(0,s.useState)(null),[i,l]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{let t=async()=>{try{let t=await n.omegaClient.get(n.stripeEndpoints.paymentStatus(e));r(t)}catch(e){console.error("Failed to fetch payment status:",e)}finally{l(!1)}};t();let s=setInterval(t,5e3);return()=>clearInterval(s)},[e]),i)?(0,t.jsx)("div",{className:"p-4 border rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-gray-200 border-t-blue-600 rounded-full animate-spin"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading payment status..."})]})}):a?(0,t.jsxs)("div",{className:"p-3 sm:p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-semibold text-sm sm:text-base",children:"Payment Status"}),(0,t.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:a.booking_id})]}),(0,t.jsx)("span",{className:`px-2 sm:px-3 py-1 sm:py-1.5 rounded text-xs sm:text-sm font-medium min-h-[32px] min-w-[80px] flex items-center justify-center ${{paid:"text-green-600",pending:"text-yellow-600",failed:"text-red-600",cancelled:"text-gray-600"}[a.payment_status]||"text-gray-600"}`,children:a.payment_status})]}),a.payment_amount&&(0,t.jsxs)("div",{className:"mt-3 sm:mt-4",children:[(0,t.jsxs)("p",{className:"text-xl sm:text-2xl font-bold",children:["$",a.payment_amount.toFixed(2)]}),a.payment_timestamp&&(0,t.jsxs)("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:["Paid on ",new Date(a.payment_timestamp).toLocaleDateString()]})]})]}):(0,t.jsx)("div",{className:"p-4 border rounded-lg bg-gray-50",children:(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Payment status unavailable"})})}function i(){return(0,t.jsx)("div",{className:"p-4 border rounded-lg animate-pulse",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-2/3"}),(0,t.jsx)("div",{className:"h-20 bg-gray-200 rounded"})]})})}function l({title:e="Something went wrong",message:s,onRetry:a,className:n=""}){return(0,t.jsx)("div",{className:`p-4 border border-red-200 bg-red-50 rounded-lg ${n}`,children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-red-800",children:e}),(0,t.jsx)("p",{className:"mt-1 text-sm text-red-700",children:s}),a&&(0,t.jsx)("button",{onClick:a,className:"mt-3 text-sm font-medium text-red-600 hover:text-red-800 underline focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 rounded px-2 py-1 min-h-[48px] min-w-[48px]",children:"Try again"})]})]})})}function o({size:e="md"}){return(0,t.jsx)("div",{className:`${{sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[e]} border-4 border-gray-200 border-t-blue-600 rounded-full animate-spin`})}function d(){let[e,d]=(0,s.useState)([]),[c,m]=(0,s.useState)(!0),[u,x]=(0,s.useState)(null),g=async()=>{m(!0),x(null);try{let e=await n.omegaClient.get(n.bookingEndpoints.list);d(e||[])}catch(e){console.error("Failed to fetch bookings:",e),x(e.message||"Failed to load bookings. Please check your connection and try again.")}finally{m(!1)}};return((0,s.useEffect)(()=>{g()},[]),c&&0===e.length)?(0,t.jsx)(a.AppLayout,{children:(0,t.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Bookings"}),(0,t.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground mt-1",children:"View and manage your event bookings"})]}),(0,t.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(e=>(0,t.jsx)(i,{},e))})]})}):u&&0===e.length?(0,t.jsx)(a.AppLayout,{children:(0,t.jsxs)("div",{className:"container mx-auto p-4 sm:p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Bookings"}),(0,t.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground mt-1",children:"View and manage your event bookings"})]}),(0,t.jsx)(l,{title:"Unable to load bookings",message:u,onRetry:g})]})}):(0,t.jsx)(a.AppLayout,{children:(0,t.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 space-y-4 sm:space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Bookings"}),(0,t.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground mt-1",children:"View and manage your event bookings"})]}),u&&(0,t.jsx)(l,{message:u,onRetry:g}),c&&e.length>0&&(0,t.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,t.jsx)(o,{size:"sm"}),(0,t.jsx)("span",{className:"ml-2 text-sm text-muted-foreground",children:"Refreshing..."})]}),0!==e.length||c?(0,t.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,t.jsx)("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow touch-manipulation",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-base sm:text-lg",children:e.service_description}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.client_email}),e.event_date&&(0,t.jsxs)("p",{className:"text-sm",children:["ðŸ“… ",new Date(e.event_date).toLocaleDateString()]}),e.event_location&&(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["ðŸ“ ",e.event_location]}),(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsx)(r,{bookingId:e.booking_id})})]})},e.booking_id))}):(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"No bookings found"})})]})})}e.s(["default",()=>d],10821)}]);